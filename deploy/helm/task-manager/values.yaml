nameOverride: ""
fullnameOverride: ""
replicaCount: 1
image:
  repository: ghcr.io/cyprus7/testtask/backend
  pullPolicy: IfNotPresent
  tag: "c4bba553b955d7be72778e28c19d9dee34653421"
imagePullSecrets: []
serviceAccount:
  create: true
  annotations: {}
  name: ""
podAnnotations: {}
podLabels: {}
# Безопасные дефолты (можно переопределить/обнулить в окружениях)
podSecurityContext:
  runAsUser: 10001
  runAsGroup: 10001
  fsGroup: 10001
securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  capabilities:
    drop: ["ALL"]
service:
  type: ClusterIP
  port: 3000
resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 500m
    memory: 512Mi
livenessProbe:
  enabled: true
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 10
  periodSeconds: 15
  timeoutSeconds: 5
  failureThreshold: 3
  successThreshold: 1
startupProbe:
  enabled: true
  httpGet:
    path: /health
    port: http
  failureThreshold: 30
  periodSeconds: 5
readinessProbe:
  enabled: true
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 5
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3
  successThreshold: 1
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 5
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80
nodeSelector: {}
tolerations: []
affinity: {}
config:
  port: 3000
  nodeEnv: production
  taskNotificationQueue: task-notifications
  dueSoonThresholdHours: 24
secret:
  create: false
  existingSecret: ""
  databaseUrlKey: DATABASE_URL
  databaseUrl: ""
  redisUrlKey: REDIS_URL
  redisUrl: ""
extraEnv: []
extraEnvFrom: []
migrations:
  enabled: false
  hook: true
  backoffLimit: 1
  ttlSecondsAfterFinished: 300
  command:
    - sh
    - -c
    - bunx drizzle-kit migrate --config ./drizzle.config.ts
  args: []
  annotations: {}
  labels: {}
  podAnnotations: {}
  podLabels: {}
  extraEnv: []
  extraEnvFrom: []
  resources: {}
  securityContext: ~
  nodeSelector: {}
  tolerations: []
  affinity: {}
ingress:
  enabled: true
  className: "nginx"
  apiBasePath: "/api"
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt
  hosts:
    - host: task20251104.test.chernov.us
      paths:
        - path: /
          pathType: Prefix
  tls:
    - hosts:
        - task20251104.test.chernov.us
      secretName: task-manager-tls
metrics:
  enabled: false
  serviceMonitor:
    enabled: false
    namespace: ""
    interval: 30s
    scrapeTimeout: 10s
    additionalLabels: {}
pdb:
  enabled: true
  minAvailable: 1
networkPolicy:
  enabled: false
  # Пример ingress from: только из ingress-nginx
  ingressFrom:
    - namespaceSelector:
        matchLabels:
          kubernetes.io/metadata.name: ingress-nginx
  # Пример egress: Postgres:5432, Redis:6379, DNS:53/UDP
  egressRules:
    - to:
        - namespaceSelector:
            matchLabels:
              kubernetes.io/metadata.name: databases
      ports:
        - port: 5432
          protocol: TCP
    - to:
        - namespaceSelector:
            matchLabels:
              kubernetes.io/metadata.name: redis
      ports:
        - port: 6379
          protocol: TCP
    - ports:
        - port: 53
          protocol: UDP
